---
import Layout from '../layouts/Layout.astro';
import TopBar from '../components/TopBar.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// TABLICA PRACOWNIKÓW
const team = [
  {
    name: "Kamil Dworniczak",
    role: "Prezes Fundacji",
    image: "https://picsum.photos/400/500?random=21",
    manifest: "Doświadczenie zawodowe zdobywa od 2011 roku, piastując kluczowe stanowiska u czołowych operatorów hazardowych w Polsce i za granicą. Odpowiadał za strategie wzrostu, marketing oraz systemy retencji graczy, promując przy tym standardy Odpowiedzialnej Gry. Jako fundator „Znaj Granice”, wykorzystuje unikalną wiedzę o mechanizmach branży do budowy nowoczesnych systemów profilaktyki, higieny cyfrowej oraz flagowego projektu Fundacji – Ośrodka Terapii Uzależnień „Granica”.",
    email: "pankamski@znajgranice.org",
    linkedIn: "#"
  },
  {
    name: "Jarosław Elżakowski",
    role: "Wiceprezes Fundacji",
    image: "https://picsum.photos/400/500?random=22",
    manifest: "Psycholog, Specjalista terapii uzależnień. W zawodzie od 2012 roku, był m.in. tu: Ośrodek Leczenia Uzależnień SPZOZ, Wojewódzki Szpital Specjalistyczny im. Stefana Kardynała Wyszyńskiego, Centrum Psychoedukacji i Pomocy Psychologicznej, Ośrodek Psychoterapii i Rozwoju, Wojewódzki Ośrodek Leczenia Uzależnienia od Alkoholu i Współuzależnienia w Lublinie w ramach Poradni i Oddziału Dziennego, w Całodobowym Oddziale Terapii Uzależnienia od Alkoholu Szpitala Neuropsychiatrycznego.",
    email: "elek.nietoperek@znajgranice.org",
    linkedIn: "#"
  },
  {
    name: "Edward Kukliński",
    role: "Członek Zarządu Fundacji",
    image: "https://picsum.photos/400/500?random=23",
    manifest: "Doświadczenie w koordynacji projektów i zarządzaniu operacyjnym zdobywał, realizując zadania z zakresu administracji, HR oraz komunikacji medialnej. Specjalizuje się w budowaniu struktur organizacyjnych od podstaw, nadzoruje procesy - od planowania strategicznego po bieżące działania sekretariatu. W Fundacji „Znaj Granice” odpowiada za sprawne funkcjonowanie baru, biura, koordynację projektów statutowych oraz relacje z partnerami i mediami. Walczy o to, by wizja Fundacji przekładała się na skuteczne działania operacyjne, wspierając rozwój kadr oraz budowę infrastruktury Ośrodka „Granica”.",
    email: "edek.k.buziaczek@znajgranice.org",
    linkedIn: "#"
  }
];

const partners = [
  { name: "Superbet", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=SUPERBET" },
  { name: "Betclic", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=BETCLIC" },
  { name: "STS", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=STS" },
  { name: "Fortuna", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=FORTUNA" },
  { name: "Playtech", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=PLAYTECH" },
  { name: "EGBA", logo: "https://placehold.co/200x80/f1f5f9/0f172a?text=EGBA" }
];
---

<Layout title="Fundacja Znaj Granice">
  <div class="fixed top-0 left-0 w-full z-[9999] shadow-2xl bg-white" style="isolation: isolate;">
    <TopBar />
    <Header />
  </div>

  <main class="relative pt-[128px] md:pt-[112px]">
    
    <section id="test-samooceny" class="py-16 md:py-24 px-6 bg-slate-900 text-white relative overflow-hidden">
      <div class="absolute top-0 right-0 w-1/3 h-full bg-emerald-600/10 skew-x-12 translate-x-20"></div>
      <div class="max-w-6xl mx-auto relative z-10">
        <div class="grid lg:grid-cols-2 gap-16 items-center">
          <div>
            <p class="text-emerald-400 font-bold uppercase tracking-[0.3em] mb-4 text-sm">Sprawdź czy już teraz</p>
            <h1 class="text-5xl md:text-7xl font-black uppercase tracking-tighter leading-[0.9] mb-8">
              Potrzebujesz <br/><span class="text-emerald-500">pomocy?</span>
            </h1>
          </div>

          <div class="bg-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl text-slate-900 relative">
            <div id="quiz-container">
              <div id="quiz-intro">
                <h3 class="text-2xl font-black uppercase tracking-tight mb-4">dowiedz się jak grasz</h3>
                <button type="button" onclick="window.startQuiz()" class="w-full bg-emerald-600 text-white py-5 rounded-2xl font-black uppercase tracking-widest hover:bg-slate-900 transition-all cursor-pointer">
                  Sprawdzam
                </button>
              </div>

              <div id="quiz-questions" class="hidden">
                <p id="question-text" class="text-xl font-bold text-slate-900 mb-8 leading-snug min-h-[100px]">Ładowanie...</p>
                <div class="grid gap-3">
                   <button type="button" onclick="window.answer(true)" class="w-full text-left p-5 border-2 border-slate-100 rounded-2xl font-bold hover:border-emerald-500 transition cursor-pointer flex justify-between">TAK <span>→</span></button>
                   <button type="button" onclick="window.answer(false)" class="w-full text-left p-5 border-2 border-slate-100 rounded-2xl font-bold hover:border-slate-900 transition cursor-pointer flex justify-between">NIE <span>→</span></button>
                </div>
              </div>

              <div id="quiz-result" class="hidden text-center">
                 <h3 id="result-title" class="text-2xl font-black uppercase mb-4">WYNIK</h3>
                 <p id="result-text" class="text-slate-700 mb-8 font-medium"></p>
                 <a href="#kontakt" class="block w-full bg-slate-900 text-white py-5 rounded-2xl font-black uppercase tracking-widest text-center">Co dalej?</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="mobile-hidden-section hidden md:block">
      <section id="o-nas" class="py-24 px-6 bg-white border-b border-slate-100">
        <div class="max-w-6xl mx-auto text-center">
          <h2 class="text-4xl md:text-6xl font-black text-slate-900 mb-8 uppercase">Znamy system od środka</h2>
          <p class="text-xl text-slate-700 max-w-4xl mx-auto">Idea Fundacji Znaj Granice wyrasta z doświadczenia branży igaming.</p>
        </div>
      </section>

      <section id="zespol" class="py-20 px-6 bg-slate-50">
          <div class="max-w-6xl mx-auto">
            <h2 class="text-4xl font-black text-slate-900 uppercase mb-12 text-center md:text-left">Zespół</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
              {team.map((member) => (
                <div class="bg-white rounded-3xl overflow-hidden shadow-xl border border-slate-100 flex flex-col group">
                  <img src={member.image} alt={member.name} class="w-full aspect-[4/5] object-cover" />
                  <div class="p-8">
                    <p class="text-emerald-600 font-bold text-[10px] uppercase tracking-widest mb-2">{member.role}</p>
                    <h3 class="text-2xl font-black text-slate-900 mb-4">{member.name}</h3>
                    <p class="text-sm text-slate-500 line-clamp-3 mb-6">{member.manifest}</p>
                    <a href={`mailto:${member.email}`} class="text-xs font-black uppercase text-emerald-600 border-b-2 border-emerald-600 pb-1">Kontakt</a>
                  </div>
                </div>
              ))}
            </div>
          </div>
      </section>

      <section id="dzialania" class="py-24 px-6 bg-slate-900 text-white">
        <div class="max-w-6xl mx-auto">
          <h2 class="text-4xl font-black uppercase mb-16">Obszary Działania</h2>
          <div class="grid md:grid-cols-3 gap-8">
            <div class="p-8 bg-slate-800 rounded-3xl border border-slate-700">
              <h3 class="text-xl font-black text-emerald-400 mb-4 uppercase">Terapeutyczny</h3>
              <p class="text-slate-400 text-sm">Wsparcie i leczenie dla osób uzależnionych.</p>
            </div>
            <div class="p-8 bg-slate-800 rounded-3xl border border-slate-700">
              <h3 class="text-xl font-black text-emerald-400 mb-4 uppercase">Społeczny</h3>
              <p class="text-slate-400 text-sm">Badania i kampanie edukacyjne.</p>
            </div>
            <div class="p-8 bg-slate-800 rounded-3xl border border-slate-700">
              <h3 class="text-xl font-black text-emerald-400 mb-4 uppercase">Biznesowy</h3>
              <p class="text-slate-400 text-sm">Audyty i szkolenia Responsible Gaming.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="partnerzy" class="py-20 px-6 bg-white">
        <div class="max-w-6xl mx-auto text-center">
          <h2 class="text-emerald-600 font-bold uppercase tracking-widest mb-12 text-sm">Partnerzy</h2>
          <div class="grid grid-cols-3 lg:grid-cols-6 gap-6 items-center opacity-50 grayscale">
            {partners.map(p => <img src={p.logo} alt={p.name} class="h-8 mx-auto object-contain" />)}
          </div>       
        </div>
      </section>
    </div>

    <section id="kontakt" class="py-24 px-6 bg-slate-900 text-white">
      <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-20">
        <div>
          <h2 class="text-5xl font-black uppercase mb-6">Potrzebujesz rozmowy?</h2>
          <p class="text-xl text-slate-400 mb-8 font-medium">Nasi eksperci czekają na Twoje zgłoszenie.</p>
          <p class="text-2xl font-black text-emerald-500">kontakt@znajgranice.org</p>
        </div>
        <div class="bg-slate-800/50 p-8 rounded-[2.5rem] border border-slate-700">
          <form class="space-y-4">
            <input type="text" placeholder="Imię" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 outline-none" />
            <textarea placeholder="Wiadomość" class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 outline-none h-32"></textarea>
            <button class="w-full bg-emerald-600 py-4 rounded-xl font-black uppercase">Wyślij</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script is:inline>
  // --- OBSŁUGA QUIZU ---
  const qs = [
    "Czy poświęcasz coraz więcej czasu na myślenie o grze?",
    "Czy próbujesz grać za coraz wyższe stawki?",
    "Czy kłamałeś bliskim, by ukryć grę?",
    "Czy po przegranej czujesz przymus odkucia się?",
    "Czy hazard dominuje nad Twoim życiem?"
  ];
  let cur = 0; let pts = 0;
  window.startQuiz = () => {
    document.getElementById('quiz-intro').classList.add('hidden');
    document.getElementById('quiz-questions').classList.remove('hidden');
    up();
  }
  function up() { document.getElementById('question-text').innerText = qs[cur]; }
  window.answer = (v) => {
    if(v) pts++; cur++;
    if(cur < qs.length) up();
    else {
      document.getElementById('quiz-questions').classList.add('hidden');
      document.getElementById('quiz-result').classList.remove('hidden');
      document.getElementById('result-text').innerText = pts > 2 ? "Zalecamy kontakt z nami." : "Wszystko wydaje się w porządku.";
    }
  }

  // --- INTELIGENTNE OTWIERANIE SEKCJI Z HAMBURGERA NA MOBILE ---
  function showHiddenSections() {
    const hiddenContainer = document.querySelector('.mobile-hidden-section');
    if (hiddenContainer && window.innerWidth < 768) {
      hiddenContainer.classList.remove('hidden');
    }
  }

  // Słuchaj kliknięć w całej stronie
  document.addEventListener('click', (e) => {
    const target = e.target.closest('a');
    if (target && target.hash) {
      // Jeśli kliknięto link prowadzący do ukrytej sekcji (np. #o-nas, #zespol)
      const hiddenIds = ['#o-nas', '#zespol', '#dzialania', '#partnerzy'];
      if (hiddenIds.includes(target.hash)) {
        showHiddenSections();
      }
    }
  });

  // Obsługa powrotu/ładowania z kotwicą w URL
  if (window.location.hash) showHiddenSections();
</script>