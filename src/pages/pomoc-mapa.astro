---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';

const hotlines = [
  { name: "Kryzysowy Telefon Zaufania", phone: "116 123", desc: "Bezpłatny, całodobowy numer dla osób w kryzysie emocjonalnym." },
  { name: "Telefon Zaufania (Hazard)", phone: "801 889 880", desc: "Instytut Psychologii Zdrowia – pomoc w problemach hazardowych." }
];
---

<Layout title="Mapa Pomocy | Znaj Granice">
  <main class="bg-white min-h-screen">
    <section class="bg-slate-900 py-20 px-6 text-white">
      <div class="max-w-4xl mx-auto">
        <a href="/" class="text-emerald-500 hover:text-emerald-400 transition-colors font-bold uppercase tracking-widest text-sm flex items-center gap-2 mb-8">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
          Powrót do strony głównej
        </a>
        <h1 class="text-4xl md:text-6xl font-black tracking-tighter uppercase">
          MAPA <span class="text-emerald-500">POMOCY</span>
        </h1>
        <p class="text-slate-400 mt-6 text-xl max-w-2xl font-medium">
          Znajdź wsparcie w swojej okolicy. Poniżej zebraliśmy kluczowe numery telefonów oraz mapę sprawdzonych placówek.
        </p>
      </div>
    </section>

    <section class="py-12 px-6 -mt-10 relative z-10">
      <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-6">
        {hotlines.map(h => (
          <div class="bg-white border-b-4 border-emerald-500 p-8 rounded-3xl shadow-xl">
            <p class="text-xs font-black text-slate-400 uppercase tracking-widest mb-1">{h.name}</p>
            <p class="text-3xl font-black text-slate-900">{h.phone}</p>
            <p class="text-sm text-slate-500 mt-1">{h.desc}</p>
          </div>
        ))}
      </div>
    </section>

    <section class="py-20 px-6 bg-slate-50">
      <div class="max-w-6xl mx-auto">
        <div class="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-slate-200">
          <div class="p-10 border-b border-slate-100">
            <h2 class="text-2xl font-black uppercase tracking-tight text-slate-900">Placówki stacjonarne i mityngi</h2>
          </div>
          <div id="map" class="w-full h-[600px] z-0"></div>
        </div>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script is:inline src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const map = L.map('map').setView([52.068, 19.479], 6);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; OpenStreetMap' }).addTo(map);

    const locations = [
      { lat: 52.2297, lng: 21.0122, name: "Warszawa: Anonimowi Hazardziści", desc: "Mityngi i wsparcie grupowe." },
      { lat: 51.7592, lng: 19.4560, name: "Łódź: Ośrodek Michała Koterskiego", desc: "Profesjonalna klinika leczenia uzależnień." },
      { lat: 52.4064, lng: 16.9252, name: "Poznań: Ośrodek Poznaj Siebie", desc: "Terapia uzależnień behawioralnych." }
    ];

    locations.forEach(loc => {
      L.marker([loc.lat, loc.lng]).addTo(map).bindPopup(`<strong style="color:#0f172a;">${loc.name}</strong><br><span style="color:#64748b;">${loc.desc}</span>`);
    });
  });
</script>